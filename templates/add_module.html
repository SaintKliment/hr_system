<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Добавить модуль</title>
  </head>
  <body>
    <h1>Добавить модуль</h1>
    <form action="/add" method="POST">
      <label for="module_name">Название модуля:</label><br />
      <input
        type="text"
        id="module_name"
        name="module_name"
        required
      /><br /><br />

      <label for="positions">Должности:</label><br />
      <select name="positions" id="positions" required>
        <option value="position1">Должность 1</option>
        <option value="position2">Должность 2</option>
        <option value="position3">Должность 3</option>
        <option value="position4">Должность 4</option></select
      ><br /><br />

      <label for="activities">Перечень мероприятий:</label><br />
      <div id="activities">
        <div class="activity">
          <label for="activity_name_1">Наименование мероприятия:</label><br />
          <input
            type="text"
            id="activity_name_1"
            name="activity_name[]"
            required
          /><br />

          <label for="activity_type_1">Тип мероприятия:</label><br />
          <select name="activity_type[]" id="activity_type_1" required>
            <option value="theory">Теория</option>
            <option value="practice">Практика</option></select
          ><br />

          <label for="activity_content_1">Содержание мероприятия:</label><br />
          <textarea
            name="activity_content[]"
            id="activity_content_1"
            rows="4"
            cols="50"
            required
          ></textarea
          ><br /><br />
        </div>
      </div>

      <button type="button" onclick="addActivity()">
        Добавить мероприятие
      </button>
      <button type="button" onclick="removeActivity()">
        Убрать мероприятие</button
      ><br /><br />

      <label for="data_source">Источник данных:</label><br />
      <input
        type="text"
        id="data_source"
        name="data_source"
        required
      /><br /><br />

      <label for="duration">Срок прохождения модуля (в днях):</label><br />
      <input type="number" id="duration" name="duration" required /><br /><br />

      <label for="responsible">Ответственное лицо:</label><br />
      <input
        type="text"
        id="responsible"
        name="responsible"
        required
      /><br /><br />

      <button type="submit">Добавить модуль</button>
    </form>
    <a href="/" class="btn btn-secondary mt-3">Назад на главную</a>

    <script>
      let activityCount = 1;

      // Добавить мероприятие
      function addActivity() {
        activityCount++;
        const activitiesDiv = document.getElementById("activities");
        const newActivity = document.createElement("div");
        newActivity.classList.add("activity");
        newActivity.setAttribute("id", "activity_" + activityCount);

        newActivity.innerHTML = `
                <label for="activity_name_${activityCount}">Наименование мероприятия:</label><br>
                <input type="text" id="activity_name_${activityCount}" name="activity_name[]" required><br>
                
                <label for="activity_type_${activityCount}">Тип мероприятия:</label><br>
                <select name="activity_type[]" id="activity_type_${activityCount}" required>
                    <option value="theory">Теория</option>
                    <option value="practice">Практика</option>
                </select><br>

                <label for="activity_content_${activityCount}">Содержание мероприятия:</label><br>
                <textarea name="activity_content[]" id="activity_content_${activityCount}" rows="4" cols="50" required></textarea><br><br>
            `;

        activitiesDiv.appendChild(newActivity);
      }

      // Убрать мероприятие
      function removeActivity() {
        if (activityCount > 1) {
          const activityDiv = document.getElementById(
            "activity_" + activityCount
          );
          activityDiv.remove();
          activityCount--;
        }
      }
    </script>
  </body>
</html>
